function init_portfolio(){$(function(){$(".mix-grid").mixitup();$(".gallery-button").on("click",function(){let group_id=$(this).data("group_id");$.ajax({type:"POST",url:url_gallery,dataType:"json",data:{group_id:group_id,},error:function(jqXHR,textStatus,errorThrown){},success:function(data){console.log(data);$.fancybox.open(data);},});});});}
function init_canvas(username){productDefinition={surfaces:["test-page","name-photo"],};configuration={initialMode:"Advanced",userId:username};var iframe=document.getElementById("editorFrame");var editor=null;var loadData=null;CustomersCanvas.IframeApi.loadEditor(iframe,productDefinition,configuration).then(function(e){editor=e;}).catch(function(error){console.error("The editor failed to load with an exception: ",error);});var currentPage="design";var approveData=null;var renderData=null;var saveData=null;$("#editorPage #saveButton").click(function(){editor.saveProduct().then(function(result){saveData=result;}).catch(function(error){saveData=handleError(error,"Save failed with exception: ");});});$("#editorPage #nextButton").click(function(){editor.getProofImages().then(function(result){approveData=result;goToPage("approve");}).catch(function(error){approveData=handleError(error,"Getting proof images failed with exception: ");});});$("#approvePage #approveButton").click(function(){editor.finishProductDesign().then(function(result){renderData=result;goToPage("finish");}).catch(function(error){renderData=handleError(error,"Product customization completion failed with exception: ");});});$("#finishOrderPage #newDesign").click(function(){editor.revertProduct();goToPage("design");});$("#approvePage #lnkEditAgain").click(function(){goToPage("design");});function setApprovePageData(){var previewElements=$("#approvePage .previewImg").attr("src","");for(var i=0;i<approveData.proofImageUrls.length&&i<previewElements.length;i++){previewElements[i].setAttribute("src",approveData.proofImageUrls[i]);}}
function setFinishPageData(){$("#finishOrderPage #hiResLink").attr("href",renderData.hiResOutputUrls[0]);}
function goToPage(to){setupPage(to);}
window.onpopstate=function(e){setupPage(e.state);};var workflowPages={design:{elements:$("#editorPage")},approve:{elements:$("#approvePage"),setData:setApprovePageData},finish:{elements:$("#finishOrderPage"),setData:setFinishPageData},};function setupPage(page){var destPageData=workflowPages[page];if(typeof destPageData.setData==="function")destPageData.setData();workflowPages[currentPage].elements.fadeOut(function(){destPageData.elements.show();currentPage=page;});}}